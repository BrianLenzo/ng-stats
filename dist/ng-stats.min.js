/*! ng-stats 2.3.0 created by Kent C. Dodds | 2015-06-10 */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define(b):"undefined"!=typeof module&&module.exports?module.exports=b:a.showAngularStats=b()}(window.self,function(){"use strict";function a(){if(!A){A=!0;var a=e(),b=Object.getPrototypeOf(a),c=b.$digest;b.$digest=function(){var a=v();c.apply(this,arguments);var b=v()-a;j(f(),b)}}}function b(){return"undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage&&"undefined"!=typeof chrome.storage.local}function c(a){window.self.angular&&e()?d(a):window.self.setTimeout(function(){c(a)},200)}function d(b){function c(a,c,d){var e=a.charAt(0).toUpperCase()+a.slice(1);b["track"+e]&&(h[a]=[],c["track + capThingToTrack"]=function(b){d&&h[a][h.length-1]===b||(h[a][h.length-1]=b,h[a].push(b))})}function d(a,c,d){var f=a.charAt(0).toUpperCase()+a.slice(1);if(b["log"+f]){var g;c["log"+f]=function(b){if(!d||g!==b){g=b;var c=e(a,b);c?console.log("%c"+a+":",c,b):console.log(a+":",b)}}}}function e(a,c){var d;return"digest"===a&&(d=c>b.digestTimeThreshold?"color:red":"color:green"),d}function f(a,c){var d=c||z,e=d>b.digestTimeThreshold?"red":"green";if(y=k(a)?y:a,z=k(c)?z:c,n.text(y+" | "+z.toFixed(2)).css({color:e}),c){var f=p.getContext("2d");l>0&&(l=0,f.fillStyle="#333",f.fillRect(o.width-1,0,1,o.height)),f.fillStyle=e,f.fillRect(o.width-1,Math.max(0,o.height-d),2,2)}}function g(){if(i.active){window.self.setTimeout(g,250);var a=p.getContext("2d"),b=a.getImageData(1,0,o.width-1,o.height);a.putImageData(b,0,0),a.fillStyle=l++>2?"black":"#333",a.fillRect(o.width-1,0,1,o.height)}}b=void 0!==b?b:{};var h={listeners:B};if(u&&(u.$el&&u.$el.remove(),u.active=!1,u=null),b!==!1&&b.autoload||(sessionStorage.removeItem(t),localStorage.removeItem(t),b!==!1)){b.position=b.position||"top-left",b=angular.extend({htmlId:null,digestTimeThreshold:16,autoload:!1,trackDigest:!1,trackWatches:!1,logDigest:!1,logWatches:!1,styles:{position:"fixed",background:"black",borderBottom:"1px solid #666",borderRight:"1px solid #666",color:"red",fontFamily:"Courier",width:130,zIndex:9999,textAlign:"right",top:-1==b.position.indexOf("top")?null:0,bottom:-1==b.position.indexOf("bottom")?null:0,right:-1==b.position.indexOf("right")?null:0,left:-1==b.position.indexOf("left")?null:0}},b||{}),a();var i=u={active:!0};if(b.autoload)if("localStorage"===b.autoload)localStorage.setItem(t,JSON.stringify(b));else{if("sessionStorage"!==b.autoload&&"boolean"!=typeof b.autoload)throw new Error("Invalid value for autoload: "+b.autoload+' can only be "localStorage" "sessionStorage" or boolean.');sessionStorage.setItem(t,JSON.stringify(b))}var j=angular.element(document.body),l=0,m=b.htmlId?' id="'+b.htmlId+'"':"";i.$el=angular.element("<div"+m+"><canvas></canvas><div></div></div>").css(b.styles),j.append(i.$el);var n=i.$el.find("div"),o={width:130,height:40},p=i.$el.find("canvas").attr(o)[0];return B.digestLength.ngStatsAddToCanvas=function(a){f(null,a)},B.watchCount.ngStatsAddToCanvas=function(a){f(a)},c("digest",B.digestLength),c("watches",B.watchCount,!0),d("digest",B.digestLength),d("watches",B.watchCount,!0),g(),s.$$phase||s.$digest(),h}}function e(){if(s)return s;var a=document.querySelector(".ng-scope");return a?s=angular.element(a).scope().$root:null}function f(){window.self.clearTimeout(x);var a=v();return a-w>300?(w=a,y=l()):x=window.self.setTimeout(function(){j(f())},350),y}function g(a){var b=h(a);return l(b)}function h(a){a=angular.element(a);var b=a.scope();return b||(a=angular.element(a.querySelector(".ng-scope")),b=a.scope()),b}function i(a){return a&&a.$$watchers?a.$$watchers:[]}function j(a,b){k(a)||angular.forEach(B.watchCount,function(b){b(a)}),k(b)||angular.forEach(B.digestLength,function(a){a(b)})}function k(a){return null===a||void 0===a}function l(a){var b=0;return m(a,function(a){b+=i(a).length}),b}function m(a,b){if("function"==typeof a&&(b=a,a=null),a=a||e(),a=q(a)){var c=b(a);return c===!1?c:o(a,b)}}function n(a,b){for(var c;(a=a.$$nextSibling)&&(c=b(a),c!==!1)&&(c=o(a,b),c!==!1););return c}function o(a,b){for(var c;(a=a.$$childHead)&&(c=b(a),c!==!1)&&(c=n(a,b),c!==!1););return c}function p(a){var b=null;return m(function(c){return c.$id===a?(b=c,!1):void 0}),b}function q(a){return r(a)&&(a=p(a)),a}function r(a){return"string"==typeof a||"number"==typeof a}var s,t="showAngularStats_autoload",u=null,v=window.self.performance&&window.self.performance.now?function(){return window.self.performance.now()}:function(){return Date.now()},w=v(),x=null,y=f()||0,z=0,A=!1,B={watchCount:{},digestLength:{}},C=sessionStorage[t]||!b()&&localStorage[t];return C&&c(JSON.parse(C)),angular.module("angularStats",[]).directive("angularStats",function(){function b(a){for(var b=a[0];b.parentElement;)b=b.parentElement;return b}var c=1;return{scope:{digestLength:"@",watchCount:"@",watchCountRoot:"@",onDigestLengthUpdate:"&?",onWatchCountUpdate:"&?"},link:function(d,e,f){a();var h=c++;if(f.hasOwnProperty("digestLength")){var i=e;f.digestLength&&(i=angular.element(e[0].querySelector(f.digestLength))),B.digestLength["ngStatsDirective"+h]=function(a){i.text((a||0).toFixed(2))}}if(f.hasOwnProperty("watchCount")){var j,k=e;if(d.watchCount&&(k=angular.element(e[0].querySelector(f.watchCount))),d.watchCountRoot)if("this"===d.watchCountRoot)j=e;else{var l;if(l=f.hasOwnProperty("watchCountOfChild")?e[0]:b(e),j=angular.element(l.querySelector(d.watchCountRoot)),!j.length)throw new Error("no element at selector: "+d.watchCountRoot)}B.watchCount["ngStatsDirective"+h]=function(a){var b=a;j&&(b=g(j)),k.text(b)}}d.onWatchCountUpdate&&(B.watchCount["ngStatsDirectiveUpdate"+h]=function(a){d.onWatchCountUpdate({watchCount:a})}),d.onDigestLengthUpdate&&(B.digestLength["ngStatsDirectiveUpdate"+h]=function(a){d.onDigestLengthUpdate({digestLength:a})}),d.$on("$destroy",function(){delete B.digestLength["ngStatsDirectiveUpdate"+h],delete B.watchCount["ngStatsDirectiveUpdate"+h],delete B.digestLength["ngStatsDirective"+h],delete B.watchCount["ngStatsDirective"+h]})}}}),d});