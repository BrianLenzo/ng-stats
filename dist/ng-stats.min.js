/*! ng-stats 20-11-2014 */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define(b):"undefined"!=typeof module&&module.exports?module.exports=b:a.showAngularStats=b()}(window,function(){"use strict";function a(){if(!r){r=!0;var a=d(),b=Object.getPrototypeOf(a),c=b.$digest;b.$digest=function(){var a=m();c.apply(this,arguments);var b=m()-a;h(e(),b)}}}function b(a){window.angular&&d()?c(a):window.setTimeout(function(){b(a)},200)}function c(b){function c(a,c){var d=c||q,e=d>b.digestTimeThreshold?"red":"green";if(p=i(a)?p:a,q=i(c)?q:c,h.text(p+" | "+q.toFixed(2)).css({color:e}),c){var f=n.getContext("2d");g>0&&(g=0,f.fillStyle="#333",f.fillRect(m.width-1,0,1,m.height)),f.fillStyle=e,f.fillRect(m.width-1,Math.max(0,m.height-d),2,2)}}function d(){if(e.active){window.setTimeout(d,250);var a=n.getContext("2d"),b=a.getImageData(1,0,m.width-1,m.height);a.putImageData(b,0,0),a.fillStyle=g++>2?"black":"#333",a.fillRect(m.width-1,0,1,m.height)}}if(l&&(l.$el&&l.$el.remove(),l.active=!1,l=null),b===!1)return void sessionStorage.removeItem(k);b=angular.extend({position:"top-left",digestTimeThreshold:16,autoload:!1},b||{}),a();var e=l={active:!0};b.autoload?sessionStorage.setItem(k,JSON.stringify(b)):sessionStorage.removeItem(k);var f=angular.element(document.body),g=0;e.$el=angular.element("<div><canvas></canvas><div></div></div>").css({position:"fixed",background:"black",borderBottom:"1px solid #666",borderRight:"1px solid #666",color:"red",fontFamily:"Courier",width:130,zIndex:9999,top:-1==b.position.indexOf("top")?null:0,bottom:-1==b.position.indexOf("bottom")?null:0,right:-1==b.position.indexOf("right")?null:0,left:-1==b.position.indexOf("left")?null:0,textAlign:"right"}),f.append(e.$el);var h=e.$el.find("div"),m={width:130,height:40},n=e.$el.find("canvas").attr(m)[0];s.digestLength.push(function(a){c(null,a)}),s.watchCount.push(function(a){c(a)}),d(),j.$$phase||j.$digest()}function d(){if(j)return j;var a=document.querySelector(".ng-scope");if(!a)return null;var b=angular.element(a).injector();return b?j=b.get("$rootScope"):null}function e(){window.clearTimeout(o);var a=m();return a-n>300?(n=a,p=f(angular.element(document.documentElement))):o=window.setTimeout(function(){h(e())},350),p}function f(a){var b=0;if(!a||!a.length)return b;var c=g(a.data().$isolateScope),d=g(a.data().$scope),e=d.concat(c);return b+=e.length,angular.forEach(a.children(),function(a){b+=f(angular.element(a))}),b}function g(a){return a&&a.$$watchers?a.$$watchers:[]}function h(a,b){i(a)||angular.forEach(s.watchCount,function(b){b(a)}),i(b)||angular.forEach(s.digestLength,function(a){a(b)})}function i(a){return null===a||void 0===a}var j,k="showAngularStats_autoload",l=null,m=window.performance?function(){return performance.now()}:function(){return Date.now()},n=m(),o=null,p=e()||0,q=0,r=!1,s={digest:[],watchCount:[],digestLength:[]},t=sessionStorage[k];return t&&b(JSON.parse(t)),angular.module("angularStats",[]).directive("angularStats",function(){function b(a){for(var b=a[0];b.parentElement;)b=b.parentElement;return b}return a(),{scope:{digestLength:"@",watchCount:"@",watchCountRoot:"@",onDigestLengthUpdate:"&?",onWatchCountUpdate:"&?"},link:function(a,c,d){if(d.hasOwnProperty("digestLength")){var e=c;d.digestLength&&(e=angular.element(c[0].querySelector(d.digestLength))),s.digestLength.push(function(a){e.text((a||0).toFixed(2))})}if(d.hasOwnProperty("watchCount")){var g,h=c;if(a.watchCount&&(h=angular.element(c[0].querySelector(d.watchCount))),a.watchCountRoot)if("this"===a.watchCountRoot)g=c;else{var i;if(i=d.hasOwnProperty("watchCountOfChild")?c[0]:b(c),g=angular.element(i.querySelector(a.watchCountRoot)),!g.length)throw new Error("no element at selector: "+a.watchCountRoot)}s.watchCount.push(function(a){var b=a;g&&(b=f(g)),h.text(b)})}a.onWatchCountUpdate&&s.watchCount.push(function(b){a.onWatchCountUpdate({watchCount:b})}),a.onDigestLengthUpdate&&s.digestLength.push(function(b){a.onDigestLengthUpdate({digestLength:b})})}}}),c});